erDiagram
    USER ||--o{ CHAT_SESSION : has
    USER {
        string _id PK
        string name
        string email
        string password
        object onboarding
        array goals
        date createdAt
    }
    
    CHAT_SESSION ||--o{ CHAT_MESSAGE_BUCKET : contains
    CHAT_SESSION {
        string _id PK
        string user FK
        string title
        int messagesCount
        date lastMessageAt
        boolean archived
        date createdAt
    }
    
    CHAT_MESSAGE_BUCKET ||--o{ MESSAGE : stores
    CHAT_MESSAGE_BUCKET {
        string _id PK
        string session FK
        string user FK
        int bucketIndex
        int count
        array messages
    }
    
    MESSAGE {
        string role
        string text
        object emotionData
        object pipelineData
        date createdAt
    }
    
    MESSAGE ||--|| EMOTION_DATA : has
    EMOTION_DATA {
        string emotion
        float confidence
        string category
        string severity
        string color
        object responseStrategy
        array allEmotions
        string modelUsed
    }
