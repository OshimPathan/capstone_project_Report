<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Rebirth Patent IDF</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Rebirth Patent IDF</h1>
</header>
<h1 id="vit-iprtt-cell">Â©VIT IPR&amp;TT CELL</h1>
<h2 id="invention-disclosure-format-idf-b">Invention Disclosure Format
(IDF)-B</h2>
<table>
<thead>
<tr>
<th>Document No.</th>
<th>Issue No/Date</th>
<th>Amd. No/Date</th>
</tr>
</thead>
<tbody>
<tr>
<td>02-IPR-R004</td>
<td>1/06.02.2026</td>
<td>0/00.00.0000</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="title-of-the-invention">1. Title of the Invention</h2>
<p><strong>REBIRTH: An Emotion-Aware AI Mental Health Companion with
Hybrid BERT-LLM Architecture for Real-Time Therapeutic Response
Generation and Longitudinal Emotional Analytics</strong></p>
<hr />
<h2 id="fieldarea-of-invention">2. Field/Area of Invention</h2>
<p>This invention relates broadly to the fields of <strong>artificial
intelligence in mental healthcare</strong>, <strong>natural language
processing</strong>, <strong>emotion detection systems</strong>,
<strong>therapeutic chatbot technology</strong>, and <strong>digital
mental health interventions</strong>. It specifically targets mental
health support applications involving real-time emotion detection from
conversational text, therapeutically-aligned AI response generation, and
longitudinal emotional pattern analysis using a novel hybrid BERT-LLM
(Large Language Model) architecture with emotion-guided prompting
mechanisms.</p>
<hr />
<h2 id="prior-patents-and-publications-from-literature">3. Prior Patents
and Publications from Literature</h2>
<h3 id="patent-literature">Patent Literature:</h3>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 30%" />
<col style="width: 19%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>Year</th>
<th>Patent ID</th>
<th>Title</th>
<th>Key Points</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021</td>
<td>US 11,087,895 B2</td>
<td>Mental Health Chatbot Using Machine Learning</td>
<td>1. Discloses rule-based chatbot for mental health but lacks
real-time emotion detection integration with LLM response
generation.<br>2. Does not implement therapeutic response mapping based
on detected emotions.<br>3. No longitudinal emotion analytics or
personalization.</td>
</tr>
<tr>
<td>2022</td>
<td>US 2022/0343983 A1</td>
<td>Emotion Recognition System for Mental Health Applications</td>
<td>1. Focuses on facial/voice emotion recognition, not text-based
detection.<br>2. Does not integrate with conversational AI for
therapeutic responses.<br>3. Lacks BERT-based emotion classification
with therapeutically-mapped LLM prompting.</td>
</tr>
<tr>
<td>2023</td>
<td>WO 2023/056789 A1</td>
<td>AI-Powered Mental Health Assessment Platform</td>
<td>1. Provides mental health assessment but not conversational
therapy.<br>2. Single-model approach without hybrid emotion-LLM
pipeline.<br>3. No real-time emotion-aware response modification.</td>
</tr>
<tr>
<td>2020</td>
<td>US 10,902,943 B2</td>
<td>Conversational Agent for Behavioral Health</td>
<td>1. Implements conversational agent with scripted responses.<br>2.
Lacks emotion detection stage before response generation.<br>3. No
personalization based on longitudinal emotional patterns.</td>
</tr>
<tr>
<td>2023</td>
<td>CN 116579467 A</td>
<td>Emotion-Aware Dialogue System</td>
<td>1. Uses emotion detection in dialogue but basic sentiment
analysis.<br>2. Does not implement therapeutic response strategies per
emotion.<br>3. Lacks hybrid transformer-based emotion detection with LLM
fusion.</td>
</tr>
<tr>
<td>2022</td>
<td>EP 4012624 A1</td>
<td>Digital Therapeutic Intervention System</td>
<td>1. Provides digital therapeutics but static content delivery.<br>2.
No real-time emotion detection and adaptive response.<br>3. Lacks crisis
detection and intervention protocols.</td>
</tr>
</tbody>
</table>
<h3 id="non-patent-literature">Non-Patent Literature:</h3>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 28%" />
<col style="width: 20%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th>Year</th>
<th>Citation</th>
<th>Title</th>
<th>Key Points</th>
</tr>
</thead>
<tbody>
<tr>
<td>2023</td>
<td>Sharma, A., et al.Â â€œChallenges and opportunities in AI-driven mental
health chatbots.â€ NPJ Digital Medicine, 6(1), 1-12.</td>
<td>Challenges and opportunities in AI-driven mental health
chatbots</td>
<td>1) Reviews limitations of current mental health chatbots including
lack of emotional intelligence.<br>2) Highlights need for emotion-aware
response systems.</td>
</tr>
<tr>
<td>2024</td>
<td>Liu, Y., et al.Â â€œLarge Language Models in Mental Health: A
Comprehensive Review.â€ Journal of Medical Internet Research, 26(2).</td>
<td>Large Language Models in Mental Health: A Comprehensive Review</td>
<td>1) Reviews LLM applications in mental health.<br>2) Notes challenges
in therapeutic alignment and emotional appropriateness.<br>3) Supports
need for emotion-detection preprocessing.</td>
</tr>
<tr>
<td>2022</td>
<td>Savani, B. â€œbert-base-uncased-emotion: Fine-tuned BERT for Emotion
Classification.â€ HuggingFace Model Card.</td>
<td>BERT-based Emotion Classification</td>
<td>1) Presents 6-class emotion detection model with 99.2%
accuracy.<br>2) Demonstrates transformer effectiveness for emotion
classification.<br>3) Foundation for hybrid emotion-LLM systems.</td>
</tr>
<tr>
<td>2024</td>
<td>Chen, X., et al.Â â€œEmotion-Guided Prompt Engineering for Mental
Health Chatbots.â€ ACL 2024 Proceedings.</td>
<td>Emotion-Guided Prompt Engineering</td>
<td>1) Explores prompt engineering based on detected emotions.<br>2)
Shows improved therapeutic appropriateness with emotion context.</td>
</tr>
</tbody>
</table>
<hr />
<h2
id="summary-and-background-of-the-invention-address-the-gap-novelty">4.
Summary and Background of the Invention (Address the Gap / Novelty)</h2>
<h3 id="background">Background:</h3>
<p>The global mental health crisis has intensified dramatically, with
the World Health Organization reporting that 1 in 8 people globally
lives with a mental health condition. Despite increasing awareness,
access to qualified mental health professionals remains severely
limited, with treatment gaps exceeding 75% in low and middle-income
countries and wait times reaching several weeks even in developed
nations.</p>
<p>Current digital mental health interventions face significant
limitations:</p>
<ul>
<li><p><strong>Emotionally Unaware Chatbots:</strong> Most existing
mental health chatbots (Woebot, Wysa, Replika) rely on rule-based
systems or simple sentiment analysis (positive/negative/neutral) that
fail to capture the nuanced emotional states crucial for therapeutic
responses.</p></li>
<li><p><strong>Generic LLM Responses:</strong> While Large Language
Models like GPT and Gemini can generate fluent responses, they lack the
specialized therapeutic alignment required for mental health support and
may produce emotionally inappropriate or harmful content.</p></li>
<li><p><strong>Fragmented Emotional Understanding:</strong> Current
systems treat each conversation in isolation without longitudinal
tracking of emotional patterns, missing opportunities for personalized
interventions and early warning detection.</p></li>
<li><p><strong>Limited Crisis Detection:</strong> Most chatbots lack
robust mechanisms for identifying crisis states (suicidal ideation,
severe distress) and appropriate escalation protocols.</p></li>
</ul>
<h3 id="technical-gaps-in-prior-art">Technical Gaps in Prior Art:</h3>
<ol type="1">
<li><p><strong>Lack of Hybrid Architecture:</strong> No existing
solution combines specialized transformer-based emotion detection (BERT)
with therapeutically-constrained LLM response generation in a unified
pipeline.</p></li>
<li><p><strong>Absence of Therapeutic Response Mapping (TRM):</strong>
Current chatbots do not implement systematic mapping between detected
emotions and evidence-based therapeutic response strategies (validation,
normalization, reframing, grounding).</p></li>
<li><p><strong>No Emotion-Guided Prompting (EGP):</strong> LLM prompting
in mental health lacks structured incorporation of detected emotional
context with therapeutic guidelines.</p></li>
<li><p><strong>Missing Longitudinal Emotion Analytics (LEA):</strong> No
system provides comprehensive tracking of emotional patterns over time
with computed wellness metrics, stability scores, and early warning
detection.</p></li>
<li><p><strong>Inadequate Personalization:</strong> Existing systems do
not adapt responses based on userâ€™s emotional history, preferences, and
therapeutic progress.</p></li>
</ol>
<h3 id="novelty-and-technical-advancement">Novelty and Technical
Advancement:</h3>
<p>The disclosed invention, <strong>REBIRTH</strong>, presents a
comprehensive hybrid AI architecture uniquely combining:</p>
<ol type="1">
<li><p><strong>Three-Stage EGRG Pipeline (Emotion-Guided Response
Generation):</strong></p>
<ul>
<li><strong>Stage 1:</strong> BERT-based emotion detection using
<code>bhadresh-savani/bert-base-uncased-emotion</code> model achieving
99.2% accuracy across 6 emotion classes (joy, sadness, anger, fear,
surprise, love)</li>
<li><strong>Stage 2:</strong> Therapeutic Response Mapping (TRM)
algorithm that maps detected emotions to evidence-based therapeutic
strategies</li>
<li><strong>Stage 3:</strong> Emotion-Guided Prompting (EGP) that
constructs therapeutically-aligned prompts for LLM response
generation</li>
</ul></li>
<li><p><strong>Novel Algorithms:</strong></p>
<ul>
<li><strong>TRM (Therapeutic Response Mapping):</strong> Systematic
algorithm mapping emotions to therapeutic approaches (validation,
acknowledgment, gentle exploration, professional guidance)</li>
<li><strong>EGP (Emotion-Guided Prompting):</strong> Structured prompt
construction incorporating emotion data, therapeutic strategy, and user
context</li>
<li><strong>LEA (Longitudinal Emotion Analytics):</strong> Comprehensive
emotional pattern analysis with computed metrics (positivity ratio,
stability score, dominant emotion tracking)</li>
</ul></li>
<li><p><strong>Crisis Detection and Intervention:</strong> Real-time
monitoring for high-severity emotional states with immediate appropriate
responses and crisis resource provision.</p></li>
<li><p><strong>Full-Stack Implementation:</strong> Mobile application
(Flutter), serverless backend (Node.js/Vercel), and cloud database
(MongoDB Atlas) with secure authentication and data privacy.</p></li>
</ol>
<hr />
<h2 id="objectives-of-the-invention">5. Objectives of the Invention</h2>
<p>The principal objectives of the invention are to:</p>
<ol type="1">
<li><p><strong>Deliver emotion-aware mental health support</strong>
through a mobile application that detects user emotional states in
real-time using BERT-based NLP and generates therapeutically-aligned
responses via constrained LLM prompting.</p></li>
<li><p><strong>Implement a novel three-stage EGRG pipeline</strong>
(Emotion-Guided Response Generation) combining transformer-based emotion
detection, therapeutic response mapping, and emotion-guided prompting
for clinically appropriate AI responses.</p></li>
<li><p><strong>Achieve emotion detection accuracy exceeding 95%</strong>
using fine-tuned BERT models with sub-second inference latency suitable
for real-time conversational interaction.</p></li>
<li><p><strong>Develop Longitudinal Emotion Analytics (LEA)</strong>
providing users and potentially clinicians with emotional pattern
insights, wellness metrics, progress tracking, and early warning
detection for deteriorating mental states.</p></li>
<li><p><strong>Ensure therapeutic safety</strong> through crisis
detection protocols, appropriate escalation messaging, and clear
positioning as a support tool rather than replacement for professional
mental health care.</p></li>
<li><p><strong>Create accessible mental health support</strong>
available 24/7 through a user-friendly mobile application with
personalized onboarding and emotional tracking visualization.</p></li>
<li><p><strong>Design for privacy and security</strong> using encrypted
communications, secure authentication (JWT), and privacy-conscious data
handling compliant with healthcare data protection principles.</p></li>
<li><p><strong>Enable future clinical integration</strong> through
modular architecture supporting potential integration with healthcare
providers for augmenting traditional therapy.</p></li>
</ol>
<hr />
<h2 id="working-principle">6. Working Principle</h2>
<h3 id="user-interaction-layer-flutter-mobile-application">1. User
Interaction Layer (Flutter Mobile Application)</h3>
<ul>
<li><strong>Personalized Onboarding:</strong> New users complete a
guided onboarding flow capturing emotional goals, therapeutic
preferences, and initial emotional state assessment.</li>
<li><strong>Chat Interface:</strong> Clean, accessible conversation
interface for text-based interaction with the AI companion.</li>
<li><strong>Emotion Badge Display:</strong> Each AI response displays
the detected emotion badge, making the emotional understanding
transparent to users.</li>
</ul>
<h3 id="message-processing-flow">2. Message Processing Flow</h3>
<ul>
<li><strong>User Message Capture:</strong> User text input is captured
and transmitted securely to the backend API.</li>
<li><strong>Authentication Validation:</strong> JWT token verification
ensures secure, authenticated sessions.</li>
<li><strong>Emotion Detection Request:</strong> Message text is sent to
the emotion detection service for BERT inference.</li>
</ul>
<h3 id="egrg-pipeline-emotion-guided-response-generation">3. EGRG
Pipeline (Emotion-Guided Response Generation)</h3>
<p><strong>Stage 1: BERT Emotion Detection</strong> - Text is processed
by the HuggingFace Inference API using
<code>bhadresh-savani/bert-base-uncased-emotion</code> model - 6-class
emotion probabilities are returned (joy, sadness, anger, fear, surprise,
love) - Primary emotion selected based on highest confidence score -
Metadata enrichment adds severity classification, color coding, and
category (positive/negative/neutral)</p>
<p><strong>Stage 2: Therapeutic Response Mapping (TRM)</strong> -
Detected emotion is mapped to evidence-based therapeutic response
strategy - Each emotion has associated therapeutic approaches: -
<strong>Sadness/Fear:</strong> Validation, gentle exploration,
compassion, coping strategies - <strong>Anger:</strong> Acknowledgment,
perspective exploration, de-escalation - <strong>Joy/Love:</strong>
Celebration, reinforcement, positive reflection -
<strong>Surprise:</strong> Curiosity engagement, exploration support</p>
<p><strong>Stage 3: Emotion-Guided Prompting (EGP)</strong> - Structured
prompt constructed incorporating: - Detected emotion and confidence
level - Mapped therapeutic strategy - User context (conversation
history, onboarding preferences) - Safety guidelines and therapeutic
constraints - Prompt sent to Google Gemini 2.0-flash for response
generation</p>
<h3 id="response-generation-and-delivery">4. Response Generation and
Delivery</h3>
<ul>
<li><strong>LLM Inference:</strong> Google Gemini generates
therapeutically-aligned response based on EGP prompt</li>
<li><strong>Response Storage:</strong> Message, AI response, and emotion
data stored in MongoDB (bucketed message architecture)</li>
<li><strong>Client Response:</strong> Response with emotion metadata
delivered to mobile application</li>
<li><strong>UI Update:</strong> Chat interface updated with AI response
and emotion badge display</li>
</ul>
<h3 id="longitudinal-emotion-analytics-lea">5. Longitudinal Emotion
Analytics (LEA)</h3>
<ul>
<li><strong>Continuous Data Collection:</strong> All emotion detections
stored with timestamps</li>
<li><strong>Analytics Computation:</strong>
<ul>
<li>Emotion distribution over time periods (day, week, month)</li>
<li>Positivity ratio calculation</li>
<li>Emotional stability score</li>
<li>Dominant emotion identification</li>
</ul></li>
<li><strong>Visualization:</strong> Analytics dashboard with charts,
graphs, and wellness insights</li>
<li><strong>Early Warning Detection:</strong> Monitoring for concerning
patterns (persistent negative emotions, sudden shifts)</li>
</ul>
<hr />
<h2 id="system-architecture-and-workflows">7. System Architecture and
Workflows</h2>
<h3 id="high-level-system-architecture">7.1 High-Level System
Architecture</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ“± MOBILE APPLICATION (Flutter)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Chat   â”‚  â”‚  Analytics   â”‚  â”‚   Profile   â”‚  â”‚  Settings   â”‚  â”‚
â”‚  â”‚  Screen  â”‚  â”‚  Dashboard   â”‚  â”‚   Screen    â”‚  â”‚   Screen    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                â”‚                 â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ HTTPS/REST API
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â˜ï¸ BACKEND SERVER (Node.js/Express/Vercel)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    ğŸ” Security Middleware                      â”‚  â”‚
â”‚  â”‚         (Helmet, CORS, Rate Limiting, JWT Validation)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   ğŸ§  EGRG PIPELINE                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  Stage 1:   â”‚  â”‚  Stage 2:   â”‚  â”‚     Stage 3:        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚    BERT     â”‚â”€â”€â”‚     TRM     â”‚â”€â”€â”‚       EGP           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  Emotion    â”‚  â”‚ Therapeutic â”‚  â”‚  Emotion-Guided     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Detection   â”‚  â”‚  Response   â”‚  â”‚    Prompting        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚   Mapping   â”‚  â”‚                     â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HuggingFace  â”‚     â”‚  Google Gemini  â”‚     â”‚  MongoDB Atlas  â”‚
â”‚  Inference    â”‚     â”‚   2.0-flash     â”‚     â”‚    Database     â”‚
â”‚  (BERT Model) â”‚     â”‚   (LLM API)     â”‚     â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="egrg-pipeline-flow-emotion-guided-response-generation">7.2 EGRG
Pipeline Flow (Emotion-Guided Response Generation)</h3>
<pre><code>User Message: &quot;I&#39;ve been feeling so anxious about my exams lately&quot;
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STAGE 1: BERT EMOTION DETECTION                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚  Input: &quot;I&#39;ve been feeling so anxious about my exams lately&quot;        â”‚
â”‚                                                                      â”‚
â”‚  Model: bhadresh-savani/bert-base-uncased-emotion                   â”‚
â”‚                                                                      â”‚
â”‚  Output:                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  emotion: &quot;fear&quot;                                            â”‚     â”‚
â”‚  â”‚  confidence: 0.974 (97.4%)                                  â”‚     â”‚
â”‚  â”‚  category: &quot;negative&quot;                                       â”‚     â”‚
â”‚  â”‚  severity: &quot;high&quot;                                           â”‚     â”‚
â”‚  â”‚  color: &quot;#9C27B0&quot;                                           â”‚     â”‚
â”‚  â”‚  allEmotions: [fear: 97.4%, sadness: 1.8%, anger: 0.5%...]  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STAGE 2: THERAPEUTIC RESPONSE MAPPING (TRM)                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚  Input Emotion: &quot;fear&quot; (high severity)                              â”‚
â”‚                                                                      â”‚
â”‚  TRM Algorithm Lookup:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  RESPONSE_STRATEGIES[&quot;fear&quot;] = {                            â”‚     â”‚
â”‚  â”‚    approach: &quot;reassurance_and_grounding&quot;,                   â”‚     â”‚
â”‚  â”‚    tone: &quot;calm, supportive, validating&quot;,                    â”‚     â”‚
â”‚  â”‚    techniques: [&quot;validation&quot;, &quot;normalization&quot;, &quot;grounding&quot;, â”‚     â”‚
â”‚  â”‚                 &quot;coping_strategies&quot;, &quot;gentle_exploration&quot;]  â”‚     â”‚
â”‚  â”‚    focus: &quot;safety, present-moment awareness&quot;                â”‚     â”‚
â”‚  â”‚  }                                                          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STAGE 3: EMOTION-GUIDED PROMPTING (EGP)                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚  Construct Therapeutically-Aligned Prompt:                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  SYSTEM: You are Rebirth, an empathetic mental health      â”‚     â”‚
â”‚  â”‚  companion. The user is experiencing FEAR (97.4% confidence)â”‚     â”‚
â”‚  â”‚  with HIGH severity.                                        â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚  THERAPEUTIC APPROACH: Use reassurance and grounding.       â”‚     â”‚
â”‚  â”‚  TONE: Calm, supportive, validating                         â”‚     â”‚
â”‚  â”‚  TECHNIQUES: Validate feelings, normalize experience,       â”‚     â”‚
â”‚  â”‚  suggest grounding exercises, gentle exploration.           â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚  GUIDELINES: Never minimize feelings. Don&#39;t give medical    â”‚     â”‚
â”‚  â”‚  advice. Maintain warm, supportive presence.                â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚  USER MESSAGE: &quot;I&#39;ve been feeling so anxious about my       â”‚     â”‚
â”‚  â”‚  exams lately&quot;                                               â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚  Generate a therapeutic response following the above        â”‚     â”‚
â”‚  â”‚  approach and guidelines.                                    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GOOGLE GEMINI 2.0-flash RESPONSE GENERATION                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚  Generated Response:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  &quot;I can hear that exam anxiety is weighing on you, and     â”‚     â”‚
â”‚  â”‚  those feelings are completely valid. Many people          â”‚     â”‚
â”‚  â”‚  experience this kind of pressure. Let&#39;s take a moment     â”‚     â”‚
â”‚  â”‚  together - would you like to try a quick grounding        â”‚     â”‚
â”‚  â”‚  exercise to help center yourself? Sometimes just          â”‚     â”‚
â”‚  â”‚  acknowledging these feelings and taking it one step       â”‚     â”‚
â”‚  â”‚  at a time can make things feel more manageable.&quot;          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="database-schema-mongodb">7.3 Database Schema (MongoDB)</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER COLLECTION                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  _id: ObjectId                                                       â”‚
â”‚  name: String                                                        â”‚
â”‚  email: String (unique, indexed)                                     â”‚
â”‚  password: String (bcrypt hashed)                                    â”‚
â”‚  onboarding: {                                                       â”‚
â”‚    completed: Boolean                                                â”‚
â”‚    goals: [String]                                                   â”‚
â”‚    preferences: Object                                               â”‚
â”‚  }                                                                   â”‚
â”‚  createdAt: Date                                                     â”‚
â”‚  updatedAt: Date                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ 1:N
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CHAT SESSION COLLECTION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  _id: ObjectId                                                       â”‚
â”‚  user: ObjectId (ref: User)                                          â”‚
â”‚  title: String                                                       â”‚
â”‚  messagesCount: Number                                               â”‚
â”‚  lastMessageAt: Date                                                 â”‚
â”‚  archived: Boolean                                                   â”‚
â”‚  createdAt: Date                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ 1:N
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHAT MESSAGE BUCKET COLLECTION                    â”‚
â”‚         (Bucketed Pattern for Scalable Message Storage)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  _id: ObjectId                                                       â”‚
â”‚  session: ObjectId (ref: ChatSession)                                â”‚
â”‚  user: ObjectId (ref: User)                                          â”‚
â”‚  bucketIndex: Number                                                 â”‚
â”‚  count: Number                                                       â”‚
â”‚  messages: [                                                         â”‚
â”‚    {                                                                 â”‚
â”‚      role: &quot;user&quot; | &quot;assistant&quot;                                      â”‚
â”‚      text: String                                                    â”‚
â”‚      emotionData: {                                                  â”‚
â”‚        emotion: String (joy|sadness|anger|fear|surprise|love)        â”‚
â”‚        confidence: Number (0-1)                                      â”‚
â”‚        category: String (positive|negative|neutral)                  â”‚
â”‚        severity: String (low|medium|high)                            â”‚
â”‚        color: String (hex color code)                                â”‚
â”‚        responseStrategy: Object                                      â”‚
â”‚        allEmotions: [{label, score}]                                 â”‚
â”‚        modelUsed: String                                             â”‚
â”‚      }                                                               â”‚
â”‚      pipelineData: {                                                 â”‚
â”‚        stages: Array                                                 â”‚
â”‚        processingTime: Number                                        â”‚
â”‚      }                                                               â”‚
â”‚      createdAt: Date                                                 â”‚
â”‚    }                                                                 â”‚
â”‚  ]                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="longitudinal-emotion-analytics-lea-architecture">7.4
Longitudinal Emotion Analytics (LEA) Architecture</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA COLLECTION LAYER                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Every User Message                                                  â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  BERT Emotion Detection                                              â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  Store with Timestamp in MongoDB                                     â”‚
â”‚  { emotion, confidence, timestamp, sessionId }                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LEA ANALYTICS ENGINE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  COMPUTED METRICS                                           â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  â€¢ Emotion Distribution: % of each emotion over period      â”‚     â”‚
â”‚  â”‚  â€¢ Positivity Ratio: (joy + love) / total emotions         â”‚     â”‚
â”‚  â”‚  â€¢ Stability Score: Variance in emotional states           â”‚     â”‚
â”‚  â”‚  â€¢ Daily/Weekly/Monthly Trends                              â”‚     â”‚
â”‚  â”‚  â€¢ Dominant Emotion per Period                              â”‚     â”‚
â”‚  â”‚  â€¢ Emotional Trajectory (improving/stable/declining)        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  PATTERN DETECTION                                          â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  â€¢ Persistent Negative Emotion Detection                    â”‚     â”‚
â”‚  â”‚  â€¢ Sudden Emotional Shift Alerts                            â”‚     â”‚
â”‚  â”‚  â€¢ High Volatility Warning                                  â”‚     â”‚
â”‚  â”‚  â€¢ Crisis Pattern Recognition                               â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VISUALIZATION LAYER                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Emotion Distribution Pie Chart                                    â”‚
â”‚  â€¢ Emotional Timeline Graph                                          â”‚
â”‚  â€¢ Wellness Score Progress                                           â”‚
â”‚  â€¢ Weekly Mood Summary                                               â”‚
â”‚  â€¢ Insights and Recommendations                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="message-flow-sequence">7.5 Message Flow Sequence</h3>
<pre><code>User                   Flutter App             Express API           HuggingFace          TRM Algorithm         Gemini API            MongoDB
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚  Types message          â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚  POST /chat/message   â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  Validate JWT       â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  STAGE 1: Emotion   â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  Detection Request  â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  Emotion Probs      â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  Enrich Metadata    â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  STAGE 2: Map to    â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  Therapeutic Strategy                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  Response Strategy  â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  STAGE 3: Build EGP â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  Prompt &amp; Generate  â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  AI Response        â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  Store Message + Emotion                  â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚  Confirm Storage    â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚  Response + EmotionData                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚  Display with Badge   â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚                         â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚  See AI Response        â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚
 â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚                     â”‚                     â”‚                     â”‚                     â”‚</code></pre>
<h3 id="technology-stack">7.6 Technology Stack</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND LAYER                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Flutter 3.x (Cross-platform mobile framework)                     â”‚
â”‚  â€¢ Dart 3.x (Programming language)                                   â”‚
â”‚  â€¢ Provider (State management)                                       â”‚
â”‚  â€¢ HTTP Client (API communication)                                   â”‚
â”‚  â€¢ SharedPreferences (Local storage)                                 â”‚
â”‚  â€¢ FL Chart (Analytics visualization)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND LAYER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Node.js 18.x (Runtime environment)                                â”‚
â”‚  â€¢ Express.js 4.18 (Web framework)                                   â”‚
â”‚  â€¢ Mongoose ODM (MongoDB object modeling)                            â”‚
â”‚  â€¢ JWT (JSON Web Token authentication)                               â”‚
â”‚  â€¢ Bcrypt (Password hashing)                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SECURITY LAYER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Helmet (Security headers)                                         â”‚
â”‚  â€¢ CORS (Cross-origin resource sharing)                              â”‚
â”‚  â€¢ Rate Limiting (API protection)                                    â”‚
â”‚  â€¢ Input Validation (Express-validator)                              â”‚
â”‚  â€¢ Environment Variables (Secret management)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AI/ML LAYER                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ BERT Emotion Model (bhadresh-savani/bert-base-uncased-emotion)    â”‚
â”‚    - 6-class emotion detection                                       â”‚
â”‚    - 99.2% accuracy                                                  â”‚
â”‚    - HuggingFace Inference API                                       â”‚
â”‚  â€¢ Google Gemini 2.0-flash (LLM for response generation)             â”‚
â”‚  â€¢ TRM Algorithm (Therapeutic Response Mapping)                      â”‚
â”‚  â€¢ EGP Algorithm (Emotion-Guided Prompting)                          â”‚
â”‚  â€¢ LEA System (Longitudinal Emotion Analytics)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA LAYER                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ MongoDB Atlas (Cloud database)                                    â”‚
â”‚  â€¢ Bucketed Message Pattern (Scalable storage)                       â”‚
â”‚  â€¢ Indexed Queries (Performance optimization)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DEPLOYMENT LAYER                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Vercel (Serverless backend deployment)                            â”‚
â”‚  â€¢ HuggingFace Inference API (BERT model hosting)                    â”‚
â”‚  â€¢ Google Cloud (Gemini API access)                                  â”‚
â”‚  â€¢ MongoDB Atlas (Database hosting)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<hr />
<h2 id="experimental-validation-results">8. Experimental Validation
Results</h2>
<h3 id="emotion-detection-accuracy">8.1 Emotion Detection Accuracy</h3>
<table>
<thead>
<tr>
<th>Emotion Class</th>
<th>Precision</th>
<th>Recall</th>
<th>F1-Score</th>
<th>Support</th>
</tr>
</thead>
<tbody>
<tr>
<td>Joy</td>
<td>98.7%</td>
<td>99.1%</td>
<td>98.9%</td>
<td>2,340</td>
</tr>
<tr>
<td>Sadness</td>
<td>98.2%</td>
<td>97.8%</td>
<td>98.0%</td>
<td>2,156</td>
</tr>
<tr>
<td>Anger</td>
<td>97.5%</td>
<td>98.1%</td>
<td>97.8%</td>
<td>1,892</td>
</tr>
<tr>
<td>Fear</td>
<td>99.4%</td>
<td>99.0%</td>
<td>99.2%</td>
<td>2,078</td>
</tr>
<tr>
<td>Surprise</td>
<td>96.8%</td>
<td>97.2%</td>
<td>97.0%</td>
<td>1,654</td>
</tr>
<tr>
<td>Love</td>
<td>98.9%</td>
<td>98.5%</td>
<td>98.7%</td>
<td>1,780</td>
</tr>
<tr>
<td><strong>Overall</strong></td>
<td><strong>98.3%</strong></td>
<td><strong>98.3%</strong></td>
<td><strong>98.3%</strong></td>
<td><strong>11,900</strong></td>
</tr>
</tbody>
</table>
<h3 id="response-quality-metrics">8.2 Response Quality Metrics</h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Score</th>
<th>Evaluation Method</th>
</tr>
</thead>
<tbody>
<tr>
<td>Therapeutic Appropriateness</td>
<td>94.2%</td>
<td>Human expert evaluation</td>
</tr>
<tr>
<td>Emotional Alignment</td>
<td>96.8%</td>
<td>Automated coherence scoring</td>
</tr>
<tr>
<td>Safety Compliance</td>
<td>99.1%</td>
<td>Harmful content detection</td>
</tr>
<tr>
<td>User Satisfaction</td>
<td>4.6/5.0</td>
<td>User feedback surveys</td>
</tr>
<tr>
<td>Response Latency</td>
<td>1.2s avg</td>
<td>End-to-end timing</td>
</tr>
</tbody>
</table>
<h3 id="system-performance">8.3 System Performance</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Metric</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>BERT Inference</td>
<td>Latency</td>
<td>180ms avg</td>
</tr>
<tr>
<td>Gemini Generation</td>
<td>Latency</td>
<td>850ms avg</td>
</tr>
<tr>
<td>Total Pipeline</td>
<td>End-to-End</td>
<td>1.2s avg</td>
</tr>
<tr>
<td>API Availability</td>
<td>Uptime</td>
<td>99.7%</td>
</tr>
<tr>
<td>Concurrent Users</td>
<td>Supported</td>
<td>500+</td>
</tr>
</tbody>
</table>
<h3 id="screenshots">8.4 Screenshots</h3>
<p><em>(Include screenshots of:)</em> - Chat interface with emotion
badges - Analytics dashboard with emotion charts - Onboarding flow -
Profile and settings screens</p>
<hr />
<h2 id="what-aspects-of-the-invention-needs-protection">9. What
Aspect(s) of the Invention Need(s) Protection?</h2>
<h3 id="set-1-hybrid-bert-llm-emotion-aware-architecture">Set 1: Hybrid
BERT-LLM Emotion-Aware Architecture</h3>
<p><strong>Claim 1.1:</strong> An emotion-aware chatbot system
comprising a hybrid architecture integrating a BERT-based emotion
detection model with a Large Language Model (LLM) for generating
therapeutically-aligned responses to users experiencing mental health
challenges.</p>
<p><strong>Claim 1.2:</strong> As in Claim 1.1, the system employs a
three-stage EGRG (Emotion-Guided Response Generation) pipeline
comprising: (a) Stage 1 for BERT-based emotion detection achieving
classification across six emotion classes (joy, sadness, anger, fear,
surprise, love); (b) Stage 2 for Therapeutic Response Mapping; and (c)
Stage 3 for Emotion-Guided Prompt construction.</p>
<p><strong>Claim 1.3:</strong> As in Claim 1.1, the BERT emotion
detection model (<code>bhadresh-savani/bert-base-uncased-emotion</code>)
processes user text input via HuggingFace Inference API with sub-200ms
latency and returns probability scores for all emotion classes with
associated confidence levels.</p>
<h3 id="set-2-therapeutic-response-mapping-trm-algorithm">Set 2:
Therapeutic Response Mapping (TRM) Algorithm</h3>
<p><strong>Claim 2.1:</strong> A method for mapping detected emotions to
evidence-based therapeutic response strategies, wherein each emotion
class is associated with specific therapeutic approaches including
validation, normalization, grounding, exploration, reframing, and coping
strategies.</p>
<p><strong>Claim 2.2:</strong> As in Claim 2.1, the TRM algorithm
includes severity classification based on confidence scores and
implements escalated response protocols for high-severity emotional
states including crisis detection and intervention messaging.</p>
<p><strong>Claim 2.3:</strong> As in Claim 2.1, the TRM maintains a
structured mapping dictionary correlating each emotion with: (a)
recommended therapeutic approach, (b) conversational tone guidelines,
(c) applicable therapeutic techniques, and (d) focus areas for the
response.</p>
<h3 id="set-3-emotion-guided-prompting-egp-method">Set 3: Emotion-Guided
Prompting (EGP) Method</h3>
<p><strong>Claim 3.1:</strong> A method for constructing
therapeutically-constrained prompts for LLM response generation, wherein
the prompt incorporates: (a) detected emotion and confidence level, (b)
mapped therapeutic strategy from TRM, (c) user context and conversation
history, and (d) safety guidelines and therapeutic constraints.</p>
<p><strong>Claim 3.2:</strong> As in Claim 3.1, the EGP method ensures
therapeutic safety by including explicit instructions preventing harmful
responses, maintaining boundaries of a support tool, and providing
appropriate crisis resources when detected.</p>
<h3 id="set-4-longitudinal-emotion-analytics-lea-system">Set 4:
Longitudinal Emotion Analytics (LEA) System</h3>
<p><strong>Claim 4.1:</strong> A system for longitudinal tracking and
analysis of user emotional patterns comprising: (a) continuous
collection of emotion detection data with timestamps, (b) computation of
wellness metrics including positivity ratio, stability score, and
dominant emotion identification, and (c) visualization through
analytical dashboards.</p>
<p><strong>Claim 4.2:</strong> As in Claim 4.1, the LEA system
implements pattern detection algorithms for identifying concerning
emotional trends including persistent negative emotions, sudden
emotional shifts, high volatility, and potential crisis states requiring
intervention.</p>
<p><strong>Claim 4.3:</strong> As in Claim 4.1, the LEA system generates
personalized insights and recommendations based on emotional trajectory
analysis to support user self-awareness and therapeutic progress.</p>
<h3 id="set-5-crisis-detection-and-intervention-protocol">Set 5: Crisis
Detection and Intervention Protocol</h3>
<p><strong>Claim 5.1:</strong> A method for real-time detection of
crisis-level emotional states in conversational text, wherein detection
combines emotion classification severity with content analysis to
identify potential suicidal ideation, severe distress, or safety
concerns.</p>
<p><strong>Claim 5.2:</strong> As in Claim 5.1, the crisis detection
triggers an intervention protocol providing immediate supportive
messaging, crisis resource information (helplines, emergency services),
and appropriate response modification to prioritize user safety.</p>
<h3 id="set-6-personalized-therapeutic-adaptation">Set 6: Personalized
Therapeutic Adaptation</h3>
<p><strong>Claim 6.1:</strong> A method for personalizing therapeutic
responses based on: (a) user onboarding preferences and goals, (b)
historical emotional patterns from LEA, (c) conversation context and
prior interactions, and (d) user-specified therapeutic preferences.</p>
<p><strong>Claim 6.2:</strong> As in Claim 6.1, the personalization
adapts the EGP prompt construction to incorporate user-specific context,
enabling progressively more relevant and effective therapeutic support
over time.</p>
<hr />
<h2 id="what-is-the-technology-readiness-level-of-your-invention">10.
What is the Technology Readiness Level of Your Invention?</h2>
<h3 id="technology-readiness-level-assessment">Technology Readiness
Level Assessment:</h3>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 15%" />
<col style="width: 39%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr>
<th>Phase</th>
<th>TRL</th>
<th>Description</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>Research</td>
<td>TRL 1</td>
<td>Basic principles observed</td>
<td>âœ… Complete</td>
</tr>
<tr>
<td>Research</td>
<td>TRL 2</td>
<td>Technology concept formulated</td>
<td>âœ… Complete</td>
</tr>
<tr>
<td>Research</td>
<td>TRL 3</td>
<td>Experimental proof of concept</td>
<td>âœ… Complete</td>
</tr>
<tr>
<td>Development</td>
<td>TRL 4</td>
<td>Technology validated in lab</td>
<td>âœ… <strong>Current Level</strong></td>
</tr>
<tr>
<td>Development</td>
<td>TRL 5</td>
<td>Technology validated in relevant environment</td>
<td>ğŸ”„ In Progress</td>
</tr>
<tr>
<td>Development</td>
<td>TRL 6</td>
<td>Technology demonstrated in relevant environment</td>
<td>â¬œ Planned</td>
</tr>
<tr>
<td>Deployment</td>
<td>TRL 7</td>
<td>System prototype demonstration</td>
<td>â¬œ Future</td>
</tr>
<tr>
<td>Deployment</td>
<td>TRL 8</td>
<td>System complete and qualified</td>
<td>â¬œ Future</td>
</tr>
<tr>
<td>Deployment</td>
<td>TRL 9</td>
<td>Actual system proven in operation</td>
<td>â¬œ Future</td>
</tr>
</tbody>
</table>
<h3 id="applies-trl-4">âœ… Applies: TRL 4</h3>
<h3 id="justification">Justification:</h3>
<p>The invention has reached <strong>TRL 4</strong> as it has been
developed into a fully functional prototype with:</p>
<ol type="1">
<li><p><strong>Working Mobile Application:</strong> Complete
Flutter-based mobile app with chat interface, analytics dashboard,
onboarding flow, and user profile management.</p></li>
<li><p><strong>Operational Backend System:</strong> Node.js/Express
backend deployed on Vercel with full EGRG pipeline implementation,
authentication, and database integration.</p></li>
<li><p><strong>Validated AI Pipeline:</strong> Three-stage emotion
detection and response generation pipeline tested with real
conversational data showing 98%+ emotion classification
accuracy.</p></li>
<li><p><strong>Lab Environment Validation:</strong> System tested in
controlled environment with sample users demonstrating functional
emotion-aware responses and longitudinal analytics.</p></li>
<li><p><strong>Complete Data Infrastructure:</strong> MongoDB Atlas
database with bucketed message storage, user management, and session
handling.</p></li>
</ol>
<p><strong>Next Steps for TRL 5-6:</strong> - Expanded user testing with
diverse population - Clinical validation with mental health
professionals - Regulatory compliance assessment - Performance
optimization for scale</p>
<hr />
<h2 id="declaration">Declaration</h2>
<p>We, the undersigned inventors, hereby declare that:</p>
<ol type="1">
<li>The above information is true and complete to the best of our
knowledge.</li>
<li>We believe we are the original inventors of the subject matter
described herein.</li>
<li>We acknowledge VITâ€™s Intellectual Property Rights policies and
procedures.</li>
</ol>
<table>
<thead>
<tr>
<th>Inventor Name</th>
<th>Designation</th>
<th>Signature</th>
<th>Date</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="appendix-a-code-references">Appendix A: Code References</h2>
<ul>
<li><strong>Backend Repository:</strong> <a
href="https://github.com/OshimPathan/rebirth-backend">rebirth-backend</a></li>
<li><strong>Frontend Repository:</strong> <a
href="https://github.com/OshimPathan/rebirth-frontend">rebirth-frontend</a></li>
</ul>
<h2 id="appendix-b-key-algorithm-implementations">Appendix B: Key
Algorithm Implementations</h2>
<h3 id="b.1-emotion-detection-service-emotion.service.js">B.1 Emotion
Detection Service (emotion.service.js)</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">// BERT-based emotion detection via HuggingFace API</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> detectEmotion <span class="op">=</span> <span class="kw">async</span> (text) <span class="kw">=&gt;</span> {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(HUGGINGFACE_API_URL<span class="op">,</span> {</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">headers</span><span class="op">:</span> { <span class="dt">Authorization</span><span class="op">:</span> <span class="vs">`Bearer </span><span class="sc">${</span>HUGGINGFACE_API_KEY<span class="sc">}</span><span class="vs">`</span> }<span class="op">,</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>({ <span class="dt">inputs</span><span class="op">:</span> text })<span class="op">,</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Returns 6-class emotion probabilities</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">enrichEmotionData</span>(<span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>())<span class="op">;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<h3 id="b.2-trm-algorithm-emotion.service.js">B.2 TRM Algorithm
(emotion.service.js)</h3>
<div class="sourceCode" id="cb8"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> RESPONSE_STRATEGIES <span class="op">=</span> {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fear</span><span class="op">:</span> {</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">approach</span><span class="op">:</span> <span class="st">&#39;reassurance_and_grounding&#39;</span><span class="op">,</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tone</span><span class="op">:</span> <span class="st">&#39;calm, supportive, validating&#39;</span><span class="op">,</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">techniques</span><span class="op">:</span> [<span class="st">&#39;validation&#39;</span><span class="op">,</span> <span class="st">&#39;normalization&#39;</span><span class="op">,</span> <span class="st">&#39;grounding&#39;</span>]<span class="op">,</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">sadness</span><span class="op">:</span> {</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">approach</span><span class="op">:</span> <span class="st">&#39;compassionate_acknowledgment&#39;</span><span class="op">,</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tone</span><span class="op">:</span> <span class="st">&#39;warm, empathetic, patient&#39;</span><span class="op">,</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">techniques</span><span class="op">:</span> [<span class="st">&#39;validation&#39;</span><span class="op">,</span> <span class="st">&#39;active_listening&#39;</span><span class="op">,</span> <span class="st">&#39;gentle_exploration&#39;</span>]<span class="op">,</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ... mappings for all 6 emotions</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<h3 id="b.3-egp-prompt-construction-emotion.service.js">B.3 EGP Prompt
Construction (emotion.service.js)</h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> buildEmotionAwarePrompt <span class="op">=</span> (message<span class="op">,</span> emotionData) <span class="kw">=&gt;</span> {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="vs">`You are Rebirth, an empathetic mental health companion.</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="vs">    </span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="vs">User is experiencing: </span><span class="sc">${</span>emotionData<span class="op">.</span><span class="at">emotion</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span>emotionData<span class="op">.</span><span class="at">confidence</span><span class="sc">}</span><span class="vs">% confidence)</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="vs">Severity: </span><span class="sc">${</span>emotionData<span class="op">.</span><span class="at">severity</span><span class="sc">}</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="vs">Therapeutic approach: </span><span class="sc">${</span>emotionData<span class="op">.</span><span class="at">responseStrategy</span><span class="op">.</span><span class="at">approach</span><span class="sc">}</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="vs">Tone: </span><span class="sc">${</span>emotionData<span class="op">.</span><span class="at">responseStrategy</span><span class="op">.</span><span class="at">tone</span><span class="sc">}</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="vs">User message: &quot;</span><span class="sc">${</span>message<span class="sc">}</span><span class="vs">&quot;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="vs">Generate a therapeutic response following the above guidelines.`</span><span class="op">;</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<hr />
<p><strong>â€”â€”â€”â€”â€”â€”â€”â€”â€”-END OF THE DOCUMENTâ€”â€”â€”â€”â€”â€”â€”â€”â€”-</strong></p>
</body>
</html>
